<h2>Shape Creator</h2>
<input autocomplete="off" type="search" id="search" placeholder="Search!" />
<ul id="results"></ul>
<script>
  const data = [
    {
      name: "instagram",
      colors: [
        { r: 5, g: 10, b: 230 },
        { r: 88, g: 81, b: 216 },
        { r: 131, g: 58, b: 180 },
        { r: 0, g: 1, b: 0.1 },
      ],
    },
    {
      name: "facebook",
      colors: [
        { r: 0.9, g: 0, b: 0.3 },
        { r: 0.9, g: 1, b: 0 },
        { r: 0.9, g: 0, b: 0.9 },
      ],
    },
  ];

  const search = document.getElementById("search");
  const results = document.getElementById("results");
  let searchQuery = "";

  const chooseBrand = (brand) => {
    const numberOfColors = brand.colors.length;
    const colors = brand.colors;
    console.log(numberOfColors);
    parent.postMessage({ pluginMessage: { colors, numberOfColors } }, "*");
  };

  const showList = () => {
    results.innerHTML = "";

    const filteredData = data.filter((element) =>
      element.name.toLowerCase().includes(searchQuery)
    );

    filteredData.forEach((e) => {
      const li = document.createElement("li");
      li.innerHTML = `${e.name}`;
      li.onclick = () => chooseBrand(e);
      results.style.cursor = "pointer";
      results.appendChild(li);
    });

    if (searchQuery === "") {
      results.style.display = "none";
    } else {
      results.style.display = "flex";
    }
  };

  search.addEventListener("input", (event) => {
    searchQuery = event.target.value.toLowerCase();
    showList();
  });
</script>
